# Product Requirements Document: Math Worksheet Generator

**Product Name:** Math Worksheet Generator  
**Brand:** huybuilds  
**Domain:** mathworksheets.huybuilds.app  
**Version:** 1.0 MVP  
**Date:** October 29, 2025  
**Status:** Draft  

---

## Executive Summary

Math Worksheet Generator is a web application that enables teachers, homeschool parents, and tutors to instantly create customized, visually-engaging math worksheets for elementary students (grades 1-6). Powered by Claude AI, the tool generates print-ready PDF worksheets with integrated visual aids and automatic answer keys in under 30 seconds.

**Value Proposition:**  
*"Professional-quality math worksheets with visual aids in 30 seconds—no design skills needed."*

**Primary Goals:**
- Launch the first product in the huybuilds education tools portfolio
- Validate Claude skills wrapper concept with a focused, marketable skill
- Achieve 100+ active users within 3 months of launch
- Establish foundation for future educational products

**Success Criteria:**
- 500+ worksheets generated in first month
- 20% user retention (return to create 2nd worksheet)
- 4.5+ star average rating from user feedback
- <5% error/regeneration rate

---

## 1. Market Opportunity

### 1.1 Target Market

**Primary Market:**
- **Elementary Teachers (K-6):** 1.5M+ in US alone
  - Need: Differentiated practice materials for diverse learners
  - Pain: Time-consuming to create custom worksheets
  - Willingness to pay: Medium-High ($5-20/month tools are common)

- **Homeschool Parents:** 3-5M households in US
  - Need: Structured practice materials aligned to grade standards
  - Pain: Limited resources compared to traditional schools
  - Willingness to pay: High (already spending $500-1000/year on curriculum)

**Secondary Market:**
- **Tutors & Education Specialists:** Independent tutors, learning centers
- **Parents:** Supplemental practice for their kids
- **Curriculum Developers:** Creating educational content

### 1.2 Market Size & Opportunity

**Total Addressable Market (TAM):**
- 5M+ educators and homeschool parents in US
- Global K-6 education market growing (English-speaking markets)

**Pain Points We Solve:**
1. **Time-Intensive Creation:** Teachers spend 3-7 hours/week creating materials
2. **Generic Worksheets:** Existing sites offer one-size-fits-all, boring worksheets
3. **Lack of Visual Engagement:** Most worksheets are text-only, not engaging for kids
4. **No Customization:** Can't adjust difficulty or themes to match student interests
5. **Expensive Solutions:** Professional tools like Teachers Pay Teachers charge per worksheet

### 1.3 Competitive Landscape

**Existing Solutions:**

| Competitor | Strengths | Weaknesses | Price |
|------------|-----------|------------|-------|
| Education.com | Large library, worksheets + lessons | Generic, subscription required, no customization | $13/month |
| Math-Drills.com | Free, huge volume | Text-only, no visuals, boring design | Free |
| Teachers Pay Teachers | Teacher-created content | Pay per item, inconsistent quality | $1-5/item |
| Worksheet Generator (various) | Simple, fast | Basic, no visuals, limited topics | Free-$10/month |

**Our Competitive Advantages:**
- ✅ **AI-Powered Customization:** Every worksheet is unique and tailored
- ✅ **Integrated Visual Aids:** Not just decorative—educationally meaningful visuals
- ✅ **Instant Generation:** 30 seconds vs. 30+ minutes manual creation
- ✅ **Theme-Based Engagement:** Kids love worksheets with their favorite themes
- ✅ **Answer Keys Included:** Automatic, accurate answer keys
- ✅ **Grade-Level Aligned:** Follows Common Core standards

---

## 2. Product Vision & Strategy

### 2.1 Product Vision

**Vision Statement:**  
"Become the go-to tool for creating engaging, personalized math practice materials for elementary students."

**Mission:**  
"Empower educators and parents to provide high-quality, customized learning experiences through AI-powered educational tools."

### 2.2 Strategic Goals

**Short-Term (3 months):**
1. Launch MVP and validate product-market fit
2. Acquire 100+ active users organically
3. Achieve 4.5+ star rating
4. Generate 500+ worksheets/month

**Medium-Term (6-12 months):**
1. Implement freemium monetization model
2. Reach 1,000+ registered users
3. Add 3+ additional subjects (reading, science, writing)
4. Build community features (share worksheets, template library)

**Long-Term (1-2 years):**
1. Become #1 AI-powered worksheet generator
2. Expand to middle school grades (7-8)
3. Add premium features (bulk generation, classroom management)
4. Partner with schools and educational organizations

### 2.3 Product Positioning

**Brand:** huybuilds (your personal tech brand)  
**Product:** Math Worksheet Generator  
**Tagline:** "Beautiful Math Worksheets, Instantly"  

**Positioning Statement:**  
"For teachers and homeschool parents who need engaging practice materials, Math Worksheet Generator is an AI-powered tool that creates customized, visually-rich worksheets in seconds—unlike generic worksheet sites, our worksheets are tailored to your students' grade level and interests with professional-quality visual aids."

---

## 3. Target Users & Personas

### Persona 1: Elementary Teacher (Primary)

**Name:** Ms. Sarah Chen  
**Age:** 32  
**Role:** 3rd Grade Teacher, Public School  
**Tech Savvy:** Medium  
**Teaching Experience:** 8 years  

**Context:**
- Has 28 students with varying skill levels
- Needs differentiated practice for different ability groups
- Spends 1-2 hours/week creating or finding worksheets
- Budget: Some personal spending, limited school budget

**Goals:**
- Quickly create practice materials that match current lessons
- Engage students with visual, themed worksheets
- Save time on administrative tasks

**Pain Points:**
- Generic worksheets don't match her pacing or student needs
- Creating custom worksheets is time-consuming
- Students lose interest in boring, text-only worksheets
- Printing costs add up quickly (wants fewer, higher-quality sheets)

**Success Scenario:**
*"On Sunday evening, I plan my week and generate 3 custom worksheets for Monday's math centers in under 5 minutes. Each worksheet targets a specific skill level and uses themes my students love. I print them once and they're ready to go."*

**User Journey:**
1. Sunday evening planning → Visits site
2. Selects grade 3, multiplication, medium difficulty
3. Chooses "space" theme (current class interest)
4. Generates worksheet + answer key
5. Downloads PDF and adds to Monday's lesson plan
6. Prints copies Monday morning
7. Returns next week to create more

---

### Persona 2: Homeschool Parent (Primary)

**Name:** Jennifer Martinez  
**Age:** 38  
**Role:** Homeschool Mom of 3 (1st, 3rd, 5th graders)  
**Tech Savvy:** Medium-High  
**Homeschool Experience:** 4 years  

**Context:**
- Teaching multiple grade levels simultaneously
- Follows structured curriculum but needs supplemental practice
- Active in homeschool community, shares resources
- Budget: Moderate spending on curriculum ($800-1000/year)

**Goals:**
- Provide grade-appropriate practice without buying multiple workbooks
- Keep learning fun and engaging for kids
- Track what each child has practiced
- Share great resources with homeschool friends

**Pain Points:**
- Needs materials for 3 different grade levels
- Buying workbooks for each topic is expensive
- Kids get bored with repetitive worksheets
- Hard to find materials that match where each child is at

**Success Scenario:**
*"On Monday morning, I realize my 3rd grader needs more fraction practice. I generate a fun ocean-themed worksheet while she's finishing breakfast. She loves it because it has dolphins and starfish. Later, I share the link with my homeschool group."*

**User Journey:**
1. Identifies need for extra practice during lesson
2. Quickly visits site on laptop or iPad
3. Generates worksheet for specific child's level
4. Child completes worksheet while parent works with sibling
5. Checks answer key together
6. Shares tool with homeschool group on Facebook
7. Becomes regular user, generating 5-10 worksheets/week

---

### Persona 3: Math Tutor (Secondary)

**Name:** David Kim  
**Age:** 28  
**Role:** Private Math Tutor  
**Tech Savvy:** High  
**Tutoring Experience:** 5 years  

**Context:**
- Tutors 10-15 students/week, grades 1-6
- Each student has different needs and skill gaps
- Charges $40-60/hour, wants to maximize session time
- Uses mix of purchased materials and self-created resources

**Goals:**
- Customize practice to each student's specific needs
- Have materials ready before sessions
- Present professional, engaging materials to parents
- Spend tutoring time on teaching, not creating materials

**Pain Points:**
- Every student needs different practice
- Can't use same worksheets repeatedly
- Creating custom materials cuts into billable time
- Parents want to see tangible materials/progress

**Success Scenario:**
*"After each tutoring session, I identify what the student needs to practice. I generate a custom worksheet for homework that targets exactly those concepts. The parent is impressed with the professional, personalized materials. I bill for tutoring time, not worksheet creation."*

**User Journey:**
1. After session, identifies student's skill gaps
2. Generates targeted practice worksheet
3. Prints or emails to parent
4. Student practices at home
5. Reviews in next session using answer key
6. Generates new materials weekly for 10+ students
7. Subscribes to paid plan for unlimited generation

---

## 4. Core Features & Requirements

### 4.1 MVP Feature Set

#### Feature 1: Worksheet Generation Form

**Description:** Simple, guided form to specify worksheet parameters

**User Story:**  
*As a teacher, I want to easily specify what kind of worksheet I need so that I can quickly get appropriate materials for my students.*

**Input Fields:**
1. **Grade Level** (required)
   - Dropdown: Grade 1, Grade 2, Grade 3, Grade 4, Grade 5, Grade 6
   - Default: None (force selection)

2. **Math Topic** (required)
   - Dynamic dropdown based on grade selection
   - Examples for Grade 3: "Addition within 1000", "Multiplication Tables 2-5", "Fractions (halves, thirds, fourths)", etc.
   - Loads from grade-standards.md

3. **Difficulty Level** (optional)
   - Radio buttons: Easy, Medium, Hard
   - Default: Medium
   - Includes tooltip explaining what each means

4. **Number of Problems** (optional)
   - Number input, min: 5, max: 20
   - Default: 10
   - Slider interface for better UX

5. **Theme** (optional)
   - Image-based selection: Nature, Food, Space, Ocean, School, Transportation, Fantasy
   - Default: Random/Nature
   - Shows preview icon for each theme

**Acceptance Criteria:**
- [ ] Form validates required fields before submission
- [ ] Topics update dynamically based on grade selection
- [ ] Form is mobile-responsive
- [ ] All fields have clear labels and tooltips
- [ ] Submit button shows loading state during generation

---

#### Feature 2: AI Worksheet Generation

**Description:** Backend processes request and generates PDF using Claude skill

**User Story:**  
*As a teacher, I want the worksheet to be generated quickly so that I don't have to wait around.*

**Functional Requirements:**
- [ ] Receives form data from frontend
- [ ] Constructs prompt for Claude API including all parameters
- [ ] Claude reads math-worksheet-generator skill
- [ ] Generates appropriate problems based on grade standards
- [ ] Creates visual elements using specified theme
- [ ] Produces two PDFs: worksheet + answer key
- [ ] Process completes in <60 seconds (p90)

**Technical Flow:**
```
1. Form submission → API endpoint
2. Validate parameters
3. Create generation record in DB (status: processing)
4. Call Claude API with skill context
5. Claude executes Python script to generate PDFs
6. Save PDFs to /outputs directory
7. Update DB record (status: completed, file paths)
8. Return download URLs to frontend
```

**Quality Checks:**
- Problems match grade-level standards
- Visual aids are relevant and clear
- Answer key matches worksheet exactly
- PDFs are print-ready (proper margins, formatting)

**Acceptance Criteria:**
- [ ] 95%+ generation success rate
- [ ] <60 seconds generation time (p90)
- [ ] Worksheet follows grade standards from references
- [ ] Visual aids enhance understanding
- [ ] Answer key is accurate
- [ ] PDFs are print-ready

---

#### Feature 3: Download & Preview

**Description:** User receives and can download generated worksheets

**User Story:**  
*As a teacher, I want to quickly download my worksheet so that I can print it or save it for later.*

**Features:**
- **Success Page:**
  - Celebration message ("Your worksheet is ready!")
  - Preview thumbnails of worksheet + answer key
  - Download buttons (prominent, clear)
  - "Generate Another" button
  - Share functionality (optional for MVP)

- **Download Options:**
  - Download Worksheet PDF
  - Download Answer Key PDF
  - Download Both (as ZIP) [nice-to-have]

- **File Naming:**
  - Format: `Grade{N}_{Topic}_{Theme}_{Timestamp}.pdf`
  - Example: `Grade3_Multiplication_Space_2025-10-29.pdf`

**Acceptance Criteria:**
- [ ] Preview shows first page of each PDF
- [ ] Download buttons trigger immediate download
- [ ] Files have descriptive names
- [ ] Works on desktop and mobile
- [ ] "Generate Another" clears form or takes back to home

---

#### Feature 4: Generation History (Logged-in Users)

**Description:** Registered users can view their past generations

**User Story:**  
*As a teacher, I want to see my previous worksheets so that I can re-download or create similar ones.*

**Features:**
- List view of past generations
- Each entry shows:
  - Thumbnail preview
  - Grade, topic, theme, difficulty
  - Date generated
  - Re-download buttons
  - "Generate Similar" button (pre-fills form)

**Acceptance Criteria:**
- [ ] History page lists all user's generations
- [ ] Sorted by most recent first
- [ ] Search/filter by grade or topic
- [ ] Re-download works without regeneration
- [ ] "Generate Similar" pre-fills form with same parameters

---

#### Feature 5: User Authentication (Simple)

**Description:** Basic registration/login to enable history and future features

**User Story:**  
*As a teacher, I want to create an account so that I can access my worksheets from any device.*

**Authentication Method:**
- Email + Password (primary)
- Google OAuth (secondary, nice-to-have)

**User Flow:**
- First-time users can generate without account (guest mode)
- After generating, prompt to "Sign up to save your worksheets"
- Returning users sign in to access history

**Features:**
- Email verification (send confirmation email)
- Password reset flow
- Profile page (name, email, preferences)
- Account deletion option

**Acceptance Criteria:**
- [ ] Users can sign up with email/password
- [ ] Email verification required
- [ ] Users can log in and out
- [ ] Password reset works via email
- [ ] Guest generations can be claimed after signup [nice-to-have]

---

### 4.2 Post-MVP Features (Future Releases)

**v1.1 Features:**
- [ ] Save favorite configurations as templates
- [ ] Batch generation (generate 5 worksheets at once)
- [ ] Custom instructions field (additional requirements)
- [ ] Email delivery option (send PDF to email)

**v1.2 Features:**
- [ ] Worksheet collections/folders organization
- [ ] Share worksheets with other users
- [ ] Public gallery of example worksheets
- [ ] Rating/feedback system

**v2.0 Features:**
- [ ] Additional subjects (reading comprehension, spelling, science)
- [ ] Classroom management (student groups, assignment tracking)
- [ ] Printable answer sheets with student names
- [ ] API access for schools/districts

---

## 5. User Experience Design

### 5.1 Information Architecture

```
Homepage
├─ Hero Section (generate your first worksheet)
├─ How It Works (3 steps)
├─ Example Worksheets Gallery
├─ Testimonials [future]
├─ Pricing [future]
└─ Footer (About, Contact, Terms, Privacy)

Generation Flow
├─ Form Page (select parameters)
├─ Processing Page (loading state)
└─ Success Page (download + preview)

User Account
├─ Dashboard (quick stats, recent worksheets)
├─ History (all past generations)
├─ Templates [future]
└─ Settings (profile, preferences)

Auth Flows
├─ Sign Up
├─ Login
├─ Password Reset
└─ Email Verification
```

### 5.2 Key User Flows

#### Flow 1: First-Time User Generates Worksheet

```
1. Lands on homepage
   → Sees hero: "Create Beautiful Math Worksheets in 30 Seconds"
   → Examples of worksheets below

2. Clicks "Generate Your First Worksheet" CTA
   → Navigates to form page

3. Fills out form
   → Selects Grade 3
   → Topics dropdown updates with Grade 3 topics
   → Selects "Multiplication Tables"
   → Chooses Medium difficulty (default)
   → Sets 10 problems (default)
   → Picks "Space" theme

4. Clicks "Generate Worksheet"
   → Form validates (all required fields filled)
   → Navigates to processing page
   → Shows progress indicator with friendly messages
   → ("Generating your problems...", "Adding space visuals...", "Creating your PDFs...")

5. Generation completes (~30-45 seconds)
   → Success page loads
   → Shows celebration animation
   → Displays preview thumbnails
   → "Download Worksheet" and "Download Answer Key" buttons prominent

6. Downloads worksheet
   → PDF downloads with descriptive name
   → Can also download answer key

7. Sees signup prompt
   → "Want to save this worksheet? Sign up for free!"
   → Can continue as guest or sign up

8. If signs up:
   → Quick signup form (email, password)
   → Receives verification email
   → Clicks link, account activated
   → Worksheet automatically added to history
```

#### Flow 2: Returning User Creates Another Worksheet

```
1. Visits mathworksheets.huybuilds.app
   → Sees "Log In" button in header
   → Clicks and logs in

2. Dashboard loads
   → Shows quick stats (e.g., "You've created 12 worksheets")
   → Recent worksheets displayed
   → Big "Generate New Worksheet" button

3. Clicks "Generate New"
   → Form page with previous grade level pre-selected [nice-to-have]
   → Fills out new parameters

4. Generates and downloads
   → Same flow as first-time user
   → Worksheet automatically saved to history

5. Views history
   → Navigates to "My Worksheets"
   → Sees all past generations
   → Searches for "Grade 3 multiplication"
   → Finds previous worksheet
   → Re-downloads without regenerating
```

### 5.3 UI Components & Design System

#### Color Palette (huybuilds Brand)
- **Primary:** #4F46E5 (Indigo) - CTAs, links
- **Secondary:** #10B981 (Green) - Success states
- **Accent:** #F59E0B (Amber) - Highlights, themes
- **Background:** #F9FAFB (Light gray)
- **Text:** #111827 (Dark gray)

#### Typography
- **Headings:** Inter, bold
- **Body:** Inter, regular
- **Monospace (for code examples):** Fira Code

#### Key Components
1. **Hero Section**
   - Large headline
   - Subheadline explaining value prop
   - Prominent CTA button
   - Visual showing example worksheet

2. **Worksheet Card** (for history/gallery)
   - Thumbnail preview
   - Grade badge
   - Topic label
   - Theme icon
   - Download button
   - Timestamp

3. **Generation Form**
   - Clean, single-column layout
   - Progressive disclosure (advanced options collapsed)
   - Visual theme selector (image grid)
   - Clear validation messages

4. **Loading State**
   - Animated progress indicator
   - Status messages
   - Estimated time remaining
   - Can't-cancel message (or cancel button [nice-to-have])

5. **Success State**
   - Celebration icon/animation
   - Preview cards for worksheet + answer key
   - Large download buttons
   - Secondary actions (generate another, save to history)

#### Responsive Design
- **Desktop (1024px+):** Multi-column layouts, sidebar navigation
- **Tablet (768-1023px):** Simplified layouts, bottom navigation
- **Mobile (< 768px):** Single column, thumb-friendly buttons, streamlined forms

### 5.4 Wireframes (Key Screens)

#### Screen 1: Homepage

```
┌────────────────────────────────────────────────┐
│  [Logo]                    [Login]  [Sign Up]  │
├────────────────────────────────────────────────┤
│                                                │
│            Beautiful Math Worksheets,          │
│                  Instantly                     │
│                                                │
│     Create customized, visual worksheets       │
│          for grades 1-6 in 30 seconds          │
│                                                │
│        [Generate Your First Worksheet →]       │
│                                                │
│     [Example Worksheet Images - 3 across]      │
│                                                │
│                How It Works                    │
│    ┌──────┐    ┌──────┐    ┌──────┐          │
│    │  1   │    │  2   │    │  3   │          │
│    │Select│    │Generate│  │Download│         │
│    └──────┘    └──────┘    └──────┘          │
│                                                │
│              [More Examples →]                 │
│                                                │
├────────────────────────────────────────────────┤
│  About | Privacy | Terms | Contact            │
└────────────────────────────────────────────────┘
```

#### Screen 2: Generation Form

```
┌────────────────────────────────────────────────┐
│  [Logo]               [My Account ▼]           │
├────────────────────────────────────────────────┤
│                                                │
│         Create Your Math Worksheet             │
│                                                │
│  Grade Level *                                 │
│  [Dropdown: Select Grade ▼]                    │
│                                                │
│  Math Topic *                                  │
│  [Dropdown: Select Topic ▼]                    │
│                                                │
│  Difficulty Level                              │
│  ○ Easy  ● Medium  ○ Hard                      │
│                                                │
│  Number of Problems                            │
│  [========●===] 10                             │
│   5                    20                      │
│                                                │
│  Theme                                         │
│  [🌿][🍎][🚀][🌊][📚][🚗][🐉]                  │
│  Nature Food Space Ocean School Transport...  │
│                                                │
│           [Generate Worksheet]                 │
│                                                │
└────────────────────────────────────────────────┘
```

#### Screen 3: Success Page

```
┌────────────────────────────────────────────────┐
│  [Logo]               [My Account ▼]           │
├────────────────────────────────────────────────┤
│                                                │
│            🎉 Your Worksheet is Ready!         │
│                                                │
│  ┌─────────────────┐  ┌─────────────────┐    │
│  │ [Worksheet]     │  │ [Answer Key]    │    │
│  │  Preview        │  │  Preview        │    │
│  │  Thumbnail      │  │  Thumbnail      │    │
│  │                 │  │                 │    │
│  │ [Download ⬇]   │  │ [Download ⬇]   │    │
│  └─────────────────┘  └─────────────────┘    │
│                                                │
│       [Generate Another Worksheet]             │
│                                                │
│         Want to save your worksheets?          │
│            [Sign Up for Free]                  │
│                                                │
└────────────────────────────────────────────────┘
```

---

## 6. Technical Architecture

### 6.1 Technology Stack

**Frontend:**
- Next.js 14+ (App Router)
- React 18+
- TypeScript
- Tailwind CSS + Shadcn/ui
- React Query (server state)
- Zustand (client state)

**Backend:**
- Next.js API Routes
- Node.js 20+
- PostgreSQL 15+ (Vercel Postgres or Supabase)
- Prisma ORM

**External Services:**
- Anthropic Claude API (Sonnet 4)
- Email Service: Resend or SendGrid (for verification emails)
- Analytics: Plausible or Google Analytics
- Error Tracking: Sentry

**Infrastructure:**
- Hosting: Vercel
- Database: Vercel Postgres or Supabase
- File Storage: Local filesystem → CDN for MVP (Vercel Edge)
- Domain: mathworksheets.huybuilds.app (subdomain of huybuilds.app)

### 6.2 System Architecture

```
┌─────────────────────────────────────────────────────┐
│                  Next.js Frontend                   │
│  ┌──────────────────────────────────────────────┐  │
│  │  Pages:                                       │  │
│  │  - Home (/)                                   │  │
│  │  - Generate (/generate)                       │  │
│  │  - Success (/success/[id])                    │  │
│  │  - History (/history)                         │  │
│  │  - Auth (/login, /signup, /reset)            │  │
│  └──────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────┘
                        ↕ HTTP/HTTPS
┌─────────────────────────────────────────────────────┐
│                  API Routes (Next.js)               │
│  ┌──────────────────────────────────────────────┐  │
│  │  Endpoints:                                   │  │
│  │  POST /api/generate                           │  │
│  │  GET  /api/generation/[id]                    │  │
│  │  GET  /api/history                            │  │
│  │  POST /api/auth/signup                        │  │
│  │  POST /api/auth/login                         │  │
│  │  POST /api/auth/reset-password                │  │
│  └──────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────┘
          ↕                    ↕                 ↕
    ┌──────────┐      ┌────────────────┐   ┌────────┐
    │ Claude   │      │  PostgreSQL    │   │ Email  │
    │   API    │      │   Database     │   │Service │
    └──────────┘      └────────────────┘   └────────┘
```

### 6.3 Database Schema

```typescript
// User
model User {
  id                String      @id @default(uuid())
  email             String      @unique
  passwordHash      String
  name              String?
  emailVerified     Boolean     @default(false)
  verificationToken String?     @unique
  resetToken        String?     @unique
  resetTokenExpiry  DateTime?
  createdAt         DateTime    @default(now())
  updatedAt         DateTime    @updatedAt
  
  generations       Generation[]
  
  @@index([email])
}

// Generation (Worksheet Generation)
model Generation {
  id              String          @id @default(uuid())
  userId          String?         // Nullable for guest users
  user            User?           @relation(fields: [userId], references: [id])
  
  // Parameters
  gradeLevel      Int             // 1-6
  topic           String
  difficulty      String          // easy, medium, hard
  problemCount    Int             @default(10)
  theme           String          @default("nature")
  
  // Generation metadata
  status          GenerationStatus @default(PROCESSING)
  worksheetPath   String?
  answerKeyPath   String?
  errorMessage    String?         @db.Text
  generationTimeMs Int?
  
  // Feedback
  rating          Int?            // 1-5 stars
  feedback        String?         @db.Text
  
  createdAt       DateTime        @default(now())
  completedAt     DateTime?
  
  @@index([userId, createdAt])
  @@index([status])
  @@index([gradeLevel])
}

enum GenerationStatus {
  PROCESSING
  COMPLETED
  FAILED
}

// Analytics (optional for MVP, useful for tracking)
model PageView {
  id          String   @id @default(uuid())
  path        String
  userId      String?
  createdAt   DateTime @default(now())
  
  @@index([path, createdAt])
}
```

### 6.4 API Endpoints Specification

#### POST /api/generate
Generate a new worksheet

**Request Body:**
```json
{
  "gradeLevel": 3,
  "topic": "Multiplication Tables (2-5)",
  "difficulty": "medium",
  "problemCount": 10,
  "theme": "space"
}
```

**Response (Success):**
```json
{
  "success": true,
  "generationId": "uuid-123",
  "status": "processing",
  "estimatedTime": 45
}
```

**Flow:**
1. Validate request body
2. Create Generation record (status: PROCESSING)
3. Trigger async Claude API call
4. Return generation ID immediately
5. Frontend polls /api/generation/[id] for status

---

#### GET /api/generation/[id]
Check generation status and get download URLs

**Response (Processing):**
```json
{
  "id": "uuid-123",
  "status": "processing",
  "progress": "Generating problems..."
}
```

**Response (Completed):**
```json
{
  "id": "uuid-123",
  "status": "completed",
  "worksheetUrl": "/downloads/worksheet_uuid.pdf",
  "answerKeyUrl": "/downloads/answer_key_uuid.pdf",
  "parameters": {
    "gradeLevel": 3,
    "topic": "Multiplication Tables",
    "theme": "space"
  },
  "generationTimeMs": 42000
}
```

**Response (Failed):**
```json
{
  "id": "uuid-123",
  "status": "failed",
  "error": "Failed to generate worksheet. Please try again."
}
```

---

#### GET /api/history
Get user's generation history (requires authentication)

**Query Params:**
- `page` (default: 1)
- `limit` (default: 20)
- `gradeLevel` (optional filter)
- `topic` (optional filter)

**Response:**
```json
{
  "generations": [
    {
      "id": "uuid-123",
      "gradeLevel": 3,
      "topic": "Multiplication",
      "theme": "space",
      "difficulty": "medium",
      "worksheetUrl": "/downloads/...",
      "answerKeyUrl": "/downloads/...",
      "createdAt": "2025-10-29T10:30:00Z"
    },
    // ... more generations
  ],
  "pagination": {
    "total": 45,
    "page": 1,
    "pages": 3
  }
}
```

---

#### POST /api/auth/signup
Register new user

**Request Body:**
```json
{
  "email": "teacher@school.com",
  "password": "SecurePass123!",
  "name": "Sarah Chen"
}
```

**Response:**
```json
{
  "success": true,
  "message": "Verification email sent. Please check your inbox.",
  "userId": "uuid-456"
}
```

---

#### POST /api/auth/verify-email
Verify email address

**Request Body:**
```json
{
  "token": "verification-token-xyz"
}
```

**Response:**
```json
{
  "success": true,
  "message": "Email verified successfully!"
}
```

### 6.5 Claude Integration Pattern

```typescript
// lib/claude-client.ts
import Anthropic from '@anthropic-ai/sdk';

interface WorksheetParams {
  gradeLevel: number;
  topic: string;
  difficulty: string;
  problemCount: number;
  theme: string;
}

export class ClaudeWorksheetGenerator {
  private client: Anthropic;
  
  constructor(apiKey: string) {
    this.client = new Anthropic({ apiKey });
  }

  async generateWorksheet(params: WorksheetParams): Promise<{
    worksheetPath: string;
    answerKeyPath: string;
  }> {
    // Build prompt that triggers the math-worksheet-generator skill
    const prompt = this.buildPrompt(params);
    
    // Call Claude API
    const message = await this.client.messages.create({
      model: 'claude-sonnet-4-20250514',
      max_tokens: 4096,
      messages: [
        {
          role: 'user',
          content: prompt
        }
      ]
    });
    
    // Claude will:
    // 1. Read the math-worksheet-generator skill
    // 2. Read grade-standards.md and visual-strategies.md
    // 3. Execute the Python script to generate PDFs
    // 4. Save PDFs to /mnt/user-data/outputs/
    
    // Extract file paths from Claude's response
    const worksheetPath = this.extractFilePath(message, 'worksheet');
    const answerKeyPath = this.extractFilePath(message, 'answer_key');
    
    return {
      worksheetPath,
      answerKeyPath
    };
  }
  
  private buildPrompt(params: WorksheetParams): string {
    return `Create a math worksheet with the following specifications:
    
Grade Level: ${params.gradeLevel}
Topic: ${params.topic}
Difficulty: ${params.difficulty}
Number of Problems: ${params.problemCount}
Theme: ${params.theme}

Please generate a worksheet with visual aids appropriate for this grade level and theme. Include an answer key.`;
  }
  
  private extractFilePath(message: any, type: 'worksheet' | 'answer_key'): string {
    // Parse Claude's response to find computer:// links
    // Return the file path
    // Implementation depends on Claude's response format
  }
}
```

### 6.6 File Management Strategy

**MVP Approach (Simple):**
- Claude generates PDFs in `/mnt/user-data/outputs/`
- Backend copies files to `/public/downloads/` or serves them directly
- Files are stored with unique UUIDs
- Served via Next.js API route or static file serving

**File Structure:**
```
/public/downloads/
  ├── worksheet_uuid-123.pdf
  ├── answer_key_uuid-123.pdf
  ├── worksheet_uuid-456.pdf
  └── ...
```

**File Naming Convention:**
```
worksheet_{generationId}.pdf
answer_key_{generationId}.pdf
```

**Cleanup Strategy:**
- Files older than 30 days are deleted (cron job)
- OR files are deleted after 7 days for guest users, kept indefinitely for registered users

**Future Enhancement:**
- Move to S3 or Cloudflare R2 for scalability
- Implement CDN for faster downloads
- Add file compression for smaller downloads

---

## 7. Monetization Strategy

### 7.1 Freemium Model (Post-MVP)

**Free Tier:**
- 5 worksheet generations per month
- Standard themes
- PDF downloads
- Email support

**Pro Tier ($9/month or $79/year):**
- Unlimited worksheet generations
- All themes + seasonal themes
- Batch generation (5 at once)
- Save favorite templates
- Priority email support
- Commercial use license (tutors, schools)

**School/District Tier ($199/year):**
- Everything in Pro
- Up to 25 teacher accounts
- Centralized billing
- Usage analytics dashboard
- Custom branding on worksheets [future]
- Dedicated support

### 7.2 MVP Monetization (No Paywall)

For MVP launch, keep it **completely free** to:
- Remove friction for user acquisition
- Validate product-market fit
- Build user base and testimonials
- Gather usage data to inform pricing
- Build community and word-of-mouth

**When to add paywall:**
- After 500+ registered users
- After validating that users find value (high retention)
- After gathering feedback on pricing
- 3-6 months post-launch

### 7.3 Alternative Monetization Ideas

**Freemium with Ads (Optional):**
- Show small banner ad on success page
- "Remove ads with Pro" upgrade path

**Pay-as-you-go (Alternative to subscription):**
- $0.50 per worksheet
- Buy credit packs: 10 for $4, 50 for $15, 100 for $25

**Affiliate Model:**
- Partner with educational product companies
- Recommend relevant learning materials
- Earn commission on sales

---

## 8. Go-to-Market Strategy

### 8.1 Launch Plan

**Pre-Launch (Week 1-2):**
- [ ] Build simple landing page with email capture
- [ ] Post in relevant communities (Reddit r/Teachers, Facebook homeschool groups)
- [ ] Create 10 example worksheets to showcase
- [ ] Write blog post: "How I Built an AI Math Worksheet Generator"
- [ ] Reach out to 5-10 teacher/homeschool parent beta testers

**Launch Week (Week 3):**
- [ ] Product Hunt launch
- [ ] Post on Hacker News (Show HN)
- [ ] Share on Twitter/X with demo video
- [ ] Post in LinkedIn education groups
- [ ] Email beta testers with launch announcement
- [ ] Submit to education tool directories

**Post-Launch (Week 4+):**
- [ ] SEO optimization for keywords: "math worksheet generator", "free printable math worksheets", etc.
- [ ] Content marketing: Blog posts on "best math practice strategies"
- [ ] YouTube demo video
- [ ] Engage with users, gather feedback
- [ ] Iterate based on user requests

### 8.2 Marketing Channels

**Organic:**
1. **SEO:** Target keywords like "math worksheet generator", "printable math worksheets grade 3", etc.
2. **Content Marketing:** Blog posts on math education, teaching tips
3. **Social Media:** Twitter/X, LinkedIn (teacher/education groups)
4. **Community Engagement:** Reddit (r/Teachers, r/homeschool), Facebook groups
5. **Word-of-Mouth:** Referral incentives for sharing

**Paid (Future):**
1. **Google Ads:** Target high-intent keywords
2. **Facebook/Instagram Ads:** Target teachers and homeschool parents
3. **Sponsorships:** Podcast ads on education/homeschool podcasts

**Partnerships:**
1. **Teacher Influencers:** Reach out to TikTok/Instagram teacher influencers
2. **Homeschool Bloggers:** Guest posts, product reviews
3. **Educational Platforms:** Partner with curriculum providers

### 8.3 Positioning & Messaging

**Primary Message:**
"Beautiful, customized math worksheets in 30 seconds—with zero design skills required."

**Key Benefits:**
- ⚡ **Instant:** Generate worksheets in under a minute
- 🎨 **Engaging:** Visual aids and themed designs kids love
- 🎯 **Customized:** Perfectly matched to your students' grade and needs
- 📄 **Print-Ready:** Professional quality PDFs with answer keys
- 💰 **Free:** No credit card required [for MVP]

**Competitive Differentiators:**
- AI-powered customization (vs. static templates)
- Integrated visual aids (vs. text-only worksheets)
- Instant generation (vs. browsing through libraries)
- Modern, clean design (vs. dated worksheet sites)

### 8.4 Success Metrics (First 3 Months)

**Acquisition:**
- 100+ registered users
- 1,000+ total worksheet generations
- 500+ unique visitors/month

**Activation:**
- 60%+ of visitors generate at least 1 worksheet
- 30%+ sign up after first generation

**Retention:**
- 20%+ return to generate 2nd worksheet within 30 days
- 10%+ generate 5+ worksheets

**Satisfaction:**
- 4.5+ star average rating
- 90%+ of worksheets rated "helpful" or better
- <5% error/regeneration rate

---

## 9. Development Roadmap

### 9.1 MVP Timeline (3 Weeks)

#### Week 1: Foundation & Core Generation
**Days 1-2: Project Setup**
- [ ] Initialize Next.js project with TypeScript
- [ ] Set up Tailwind CSS + Shadcn/ui
- [ ] Configure database (PostgreSQL + Prisma)
- [ ] Set up Vercel deployment
- [ ] Configure domain (mathworksheets.huybuilds.app)

**Days 3-4: Claude Integration**
- [ ] Claude API client implementation
- [ ] Test math-worksheet-generator skill locally
- [ ] Implement generation endpoint (/api/generate)
- [ ] File handling (save PDFs, serve downloads)

**Days 5-7: Basic UI**
- [ ] Homepage with hero and CTA
- [ ] Generation form with all input fields
- [ ] Processing/loading page
- [ ] Success page with download buttons
- [ ] Basic responsive design

**Milestone:** Can generate and download a worksheet end-to-end

---

#### Week 2: Polish & User Accounts
**Days 8-9: Authentication**
- [ ] NextAuth.js setup (email/password)
- [ ] Sign up, login, logout flows
- [ ] Email verification (Resend integration)
- [ ] Password reset flow

**Days 10-11: Generation History**
- [ ] History page (list past generations)
- [ ] Re-download functionality
- [ ] Search and filter
- [ ] "Generate Similar" feature

**Days 12-14: UX Polish**
- [ ] Loading states and animations
- [ ] Error handling and user-friendly messages
- [ ] Mobile responsive refinement
- [ ] Accessibility improvements (WCAG 2.1 AA)
- [ ] SEO optimization (meta tags, sitemap)

**Milestone:** Fully functional MVP with auth and history

---

#### Week 3: Testing & Launch
**Days 15-16: Testing**
- [ ] End-to-end testing (all flows)
- [ ] Cross-browser testing
- [ ] Mobile testing (iOS, Android)
- [ ] Load testing (can handle 50 concurrent users?)
- [ ] Bug fixes

**Days 17-18: Launch Prep**
- [ ] Privacy policy and terms of service
- [ ] Contact/support page
- [ ] Analytics setup (Plausible or GA)
- [ ] Error monitoring (Sentry)
- [ ] Production environment setup

**Days 19-20: Soft Launch**
- [ ] Deploy to production
- [ ] Invite 5-10 beta testers
- [ ] Gather initial feedback
- [ ] Fix critical issues

**Day 21: Public Launch**
- [ ] Product Hunt launch
- [ ] Social media announcements
- [ ] Submit to directories
- [ ] Monitor for issues

**Milestone:** Publicly launched MVP

---

### 9.2 Post-MVP Roadmap

**Month 2 (Iteration):**
- Gather user feedback
- Fix bugs and improve UX
- Add most-requested features
- Improve SEO and content
- Target: 100+ users, 500+ generations

**Month 3 (Growth):**
- Add social proof (testimonials)
- Implement referral system
- Add more themes
- Content marketing push
- Target: 300+ users, 2000+ generations

**Month 4-6 (Monetization):**
- Introduce Pro tier
- Add batch generation
- Add templates feature
- Partner with teacher influencers
- Target: 1000+ users, 100 paying customers

---

## 10. Risks & Mitigation

### Risk 1: Claude API Costs Too High
**Impact:** High  
**Probability:** Medium  

**Analysis:**
- Each worksheet generation costs ~$0.05-0.15 (estimate)
- 1,000 generations/month = $50-150/month
- If viral, costs could spike unexpectedly

**Mitigation:**
- Set up usage alerts at $100, $250, $500/month
- Implement rate limiting (5 generations/hour for free users)
- Cache common worksheet configurations [future]
- Move to freemium model if costs exceed $300/month

---

### Risk 2: Low User Adoption
**Impact:** High  
**Probability:** Medium  

**Mitigation:**
- Validate with beta testers before launch
- Start small, get feedback, iterate quickly
- Focus on one user persona (homeschool parents) initially
- Build in public, share progress on Twitter
- Offer incentive for early adopters (free Pro when launched)

---

### Risk 3: Generated Worksheets Quality Issues
**Impact:** Critical  
**Probability:** Low-Medium  

**Mitigation:**
- Extensive testing across all grade levels before launch
- Verify that problems match grade standards
- Visual QA for each theme
- Provide feedback mechanism ("Report an issue")
- Manually review first 50 generated worksheets
- Regenerate option if user not satisfied

---

### Risk 4: Legal Issues (Copyright, Educational Standards)
**Impact:** Medium  
**Probability:** Low  

**Mitigation:**
- AI-generated content is original, not copyrighted
- Include disclaimer: "Worksheets are AI-generated and should be reviewed by educators"
- Don't claim alignment to specific state standards (just "grade-appropriate")
- Clear terms of service
- Consult with education lawyer if scaling to schools

---

### Risk 5: Competitors Copy the Idea
**Impact:** Medium  
**Probability:** Medium-High  

**Mitigation:**
- Move fast, establish brand first
- Focus on user experience and quality
- Build community and loyalty
- Add unique features (themes, visual aids, customization)
- Leverage huybuilds brand credibility
- Patent isn't realistic, but being first to market matters

---

### Risk 6: Technical Failures
**Impact:** High  
**Probability:** Low  

**Mitigation:**
- Use reliable infrastructure (Vercel)
- Set up error monitoring (Sentry)
- Implement graceful error handling
- Have fallback messaging for API failures
- Regular backups
- Load testing before launch

---

## 11. Success Criteria & KPIs

### Launch Success Criteria (Week 1)
- [ ] 50+ worksheet generations
- [ ] 20+ registered users
- [ ] <5% error rate
- [ ] 4+ star average rating
- [ ] Zero critical bugs

### Month 1 Goals
- 100+ registered users
- 500+ total worksheet generations
- 20% user retention (return for 2nd worksheet)
- 60%+ conversion rate (visitor → generation)
- 4.5+ star average rating

### Month 3 Goals
- 300+ registered users
- 2,000+ total generations
- 25%+ user retention
- 100+ active users (generate 1+ worksheet/month)
- Positive word-of-mouth (organic referrals)

### Month 6 Goals
- 1,000+ registered users
- 10,000+ total generations
- 30%+ user retention
- Launch Pro tier with 50+ paying customers
- $500+ MRR (if monetized)

### Key Performance Indicators (Track Weekly)

**Acquisition:**
- New user signups
- Total worksheet generations
- Website traffic (unique visitors)
- Conversion rate (visitor → generation)

**Engagement:**
- Worksheets generated per user
- Return user rate
- Time on site
- Most popular grade levels and topics

**Quality:**
- Average rating
- Regeneration rate
- Error rate
- User feedback sentiment

**Retention:**
- Day 7 retention
- Day 30 retention
- Active users (generated 1+ worksheet in last 30 days)

**Revenue (Future):**
- Monthly Recurring Revenue (MRR)
- Free → Paid conversion rate
- Customer Lifetime Value (LTV)
- Churn rate

---

## 12. Open Questions & Decisions

### Product Decisions
1. **Guest vs. Account-First:** Should first-time users be forced to sign up before generating?
   - **Recommendation:** Allow guest generation, prompt signup after
   
2. **Generation Limits:** How many free generations before requiring signup/payment?
   - **Recommendation:** Unlimited for MVP, 5/month for freemium launch
   
3. **File Retention:** How long to keep generated PDFs for guest users?
   - **Recommendation:** 7 days for guests, indefinite for registered users
   
4. **Worksheet Sharing:** Should users be able to share worksheets publicly?
   - **Recommendation:** Post-MVP feature (share links, gallery)

### Technical Decisions
5. **Real-time vs. Polling:** How to show generation progress?
   - **Recommendation:** Polling every 2 seconds (simpler for MVP)
   
6. **File Storage:** Local filesystem vs. S3/R2?
   - **Recommendation:** Local for MVP, migrate to R2 if storage becomes issue
   
7. **Email Service:** Resend vs. SendGrid?
   - **Recommendation:** Resend (simpler, modern API)
   
8. **Database:** Vercel Postgres vs. Supabase?
   - **Recommendation:** Vercel Postgres (tighter integration with Vercel)

### Marketing Decisions
9. **Launch Timing:** What day/time to launch on Product Hunt?
   - **Recommendation:** Tuesday or Wednesday, 12:01am PT
   
10. **Pricing Model:** Subscription vs. Pay-per-use?
    - **Decision needed:** Survey beta users for preference

---

## 13. Appendices

### Appendix A: Competitive Analysis Detail

**Education.com**
- Price: $12.99/month
- Strengths: Comprehensive library, lessons + worksheets
- Weaknesses: Generic content, no customization, expensive
- Market Position: Premium, all-in-one solution
- Our Advantage: Instant customization, cheaper, focused

**Math-Drills.com**
- Price: Free
- Strengths: Huge volume, completely free
- Weaknesses: Boring text-only design, dated UI
- Market Position: Free, no-frills
- Our Advantage: Beautiful design, visual aids, themes

**Teachers Pay Teachers**
- Price: $1-5 per worksheet
- Strengths: Teacher-created, high quality
- Weaknesses: Pay per item, browsing overhead
- Market Position: Marketplace
- Our Advantage: Unlimited generation, instant, cheaper long-term

### Appendix B: User Research Plan

**Beta Testing (Pre-Launch):**
- Recruit 5-10 teachers/homeschool parents
- Conduct 30-min interviews
- Ask to generate 3 worksheets and provide feedback
- Observe where they struggle
- Gather feature requests

**Post-Launch Feedback:**
- In-app feedback widget
- Follow-up email surveys (7 days, 30 days)
- User interviews with active users (monthly)
- Monitor social media mentions

**Questions to Ask:**
1. How did you discover this tool?
2. What problem were you trying to solve?
3. How easy was it to generate your first worksheet?
4. Did the worksheet meet your expectations?
5. What would make this tool more useful?
6. Would you pay for unlimited access? How much?

### Appendix C: Technical Dependencies

**Required API Keys & Services:**
- Anthropic Claude API key
- Vercel account and project
- Database (Vercel Postgres)
- Email service (Resend) API key
- Domain configured (mathworksheets.huybuilds.app)
- Analytics (Plausible or GA)
- Error monitoring (Sentry)

**Development Environment:**
- Node.js 20+
- PostgreSQL 15+ (local or Docker)
- Git & GitHub
- Code editor (VS Code recommended)

### Appendix D: Glossary

- **Generation:** A single instance of creating a worksheet
- **Theme:** Visual style applied to worksheet illustrations
- **Grade Standards:** Mathematical topics appropriate for each grade level
- **Answer Key:** PDF showing solutions to all problems
- **Visual Aid:** Illustrations that enhance understanding (arrays, number lines, etc.)

---

## Document Approval

**Stakeholder Sign-off:**
- [ ] Product Owner (You)
- [ ] Technical Lead (You)
- [ ] Design Review (Optional)

**Next Steps:**
1. Review and finalize PRD
2. Set up development environment
3. Begin Week 1: Foundation & Core Generation
4. Schedule daily check-ins to track progress

---

*End of Product Requirements Document*

**Questions or feedback?** Let's discuss before starting development!